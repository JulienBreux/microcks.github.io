<!DOCTYPE html>
<html class="no-js" lang="en-us">
  <head>
    <meta charset="utf-8">
    
    

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Alegreya+Sans+SC:400,700|Source+Sans+Pro:300,700&display=swap" >

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
     
    <title>Installing on Kube using Operator | Microcks.io</title>

    <meta name="viewport" content="width=device-width,minimum-scale=1">
     <meta name="generator" content="Hugo 0.88.1" />

      
        <META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">
      

    
    
      <link rel="stylesheet" href="/output/css/app.min.a42f770a563de5f4c7aa7d9babef2ebb3b19a040c7f605dbe8b506de79650df9.css" integrity="sha256-pC93ClY95fTHqn2bq&#43;8uuzsZoEDH9gXb6LUG3nllDfk=" crossorigin="anonymous"> 
          
    


    

    
  <script type="text/javascript" src="/output/js/app.1caa725adf6b3c0d83460e78ce17051642a329cbe9222b7eccefa8def7cd7559.js" integrity="sha256-HKpyWt9rPA2DRg54zhcFFkKjKcvpIit&#43;zO&#43;o3vfNdVk=" crossorigin="anonymous" defer></script>
      
 



<script async defer src="https://buttons.github.io/buttons.js"></script>

      
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#0594cb">
<meta name="theme-color" content="#ffffff">
<meta property="og:title" content="Installing on Kube using Operator" />
<meta property="og:description" content="Overview Operators are next-gen installer, maintainer and life-cycle manager for Kubernetes native applications. Operators are a Kubernetes native piece of software (aka Kube controller) that manages specific Custom Resources defining their domain of expertise. Microcks provide an Operator that was developed using the Operator Framework SDK and that is distributed through OperatorHub.io.
At the time of writing, Microcks only defines one customer resource that is called the MicrocksInstall: a description of the instance configuration you want to deploy." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://microcks.io/documentation/installing/operator/" /><meta property="article:section" content="documentation" />
<meta property="article:published_time" content="2020-02-11T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-04-28T00:00:00+00:00" />

<meta itemprop="name" content="Installing on Kube using Operator">
<meta itemprop="description" content="Overview Operators are next-gen installer, maintainer and life-cycle manager for Kubernetes native applications. Operators are a Kubernetes native piece of software (aka Kube controller) that manages specific Custom Resources defining their domain of expertise. Microcks provide an Operator that was developed using the Operator Framework SDK and that is distributed through OperatorHub.io.
At the time of writing, Microcks only defines one customer resource that is called the MicrocksInstall: a description of the instance configuration you want to deploy."><meta itemprop="datePublished" content="2020-02-11T00:00:00+00:00" />
<meta itemprop="dateModified" content="2021-04-28T00:00:00+00:00" />
<meta itemprop="wordCount" content="985">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Installing on Kube using Operator"/>
<meta name="twitter:description" content="Overview Operators are next-gen installer, maintainer and life-cycle manager for Kubernetes native applications. Operators are a Kubernetes native piece of software (aka Kube controller) that manages specific Custom Resources defining their domain of expertise. Microcks provide an Operator that was developed using the Operator Framework SDK and that is distributed through OperatorHub.io.
At the time of writing, Microcks only defines one customer resource that is called the MicrocksInstall: a description of the instance configuration you want to deploy."/>


      
        
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-152524664-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  
  gtag('config', 'UA-152524664-1', {'dimension1': 'microcks.io', 'dimension2': ''});



var trackOutboundLink = function(id, url) {
  gtag('event', 'click', {
    'event_category': 'outbound',
    'event_label': id,
    'transport_type': 'beacon',
    'event_callback': function(){document.location = url;}
  });
}

</script>

      
      
  </head>
  <body class="ma0 sans-serif bg-primary-color-light production">
    
<nav class="bg-primary-color-dark pv4 w-100" role="navigation">

  <div class="center flex-ns flex-wrap items-center justify-start mw9">

    <img src="/images/microcks-round.png" class="logo-img dn-ns dn-xs dib-l">

    <h1 class="dim f2 lh-solid mr0 ml6-l ml2-ns pl3-ns ml3-xs mv0 fem">
      <a href="https://microcks.io" class="link white">
        MICROCKS
      </a>
    </h1>
    
    <ul class="list ma0 pa0 dn dib-l ml-auto-l">
      
        <li class="f5 dib mr4 fem" role="menuitem">
            
          <a href="/news/" class="dim link light-silver">
            NEWS
              
            
            
          </a>
        </li>
      
        <li class="f5 dib mr4 fem" role="menuitem">
            
          <a href="/documentation/" class="dim link light-silver">
            DOCS
              
            
            
          </a>
        </li>
      
        <li class="f5 dib mr4 fem" role="menuitem">
            
          <a href="/blog/" class="dim link light-silver">
            BLOG
              
            
            
          </a>
        </li>
      
        <li class="f5 dib mr4 fem" role="menuitem">
            
          <a href="/resources/" class="dim link light-silver">
            RESOURCES
              
            
            
          </a>
        </li>
      
        <li class="f5 dib mr4 fem" role="menuitem">
            
          <a href="/community/" class="dim link light-silver">
            COMMUNITY
              
            
            
          </a>
        </li>
      
        <li class="f5 dib mr4 fem" role="menuitem">
            
          <a href="https://github.com/microcks/microcks" class="dim link light-silver">
            GITHUB
              
            
            
              <span class="pl1">
                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32" class="fill-current v-base" aria-label="External Link">
<path d="M25.152 16.576v5.696q0 2.144-1.504 3.648t-3.648 1.504h-14.848q-2.144 0-3.648-1.504t-1.504-3.648v-14.848q0-2.112 1.504-3.616t3.648-1.536h12.576q0.224 0 0.384 0.16t0.16 0.416v1.152q0 0.256-0.16 0.416t-0.384 0.16h-12.576q-1.184 0-2.016 0.832t-0.864 2.016v14.848q0 1.184 0.864 2.016t2.016 0.864h14.848q1.184 0 2.016-0.864t0.832-2.016v-5.696q0-0.256 0.16-0.416t0.416-0.16h1.152q0.256 0 0.416 0.16t0.16 0.416zM32 1.152v9.12q0 0.48-0.352 0.8t-0.8 0.352-0.8-0.352l-3.136-3.136-11.648 11.648q-0.16 0.192-0.416 0.192t-0.384-0.192l-2.048-2.048q-0.192-0.16-0.192-0.384t0.192-0.416l11.648-11.648-3.136-3.136q-0.352-0.352-0.352-0.8t0.352-0.8 0.8-0.352h9.12q0.48 0 0.8 0.352t0.352 0.8z"></path>
</svg>

              </span>
            
          </a>
        </li>
      
    </ul>

    <div class="db dib-ns pl3 pl4-ns pl2-xs"><form id="site-search-form" action="" role="search">
  <fieldset class="bn ma0 pa0">
    <label class="clip" for="search-input">Search</label>
    <input type="search" id="search-input" class="needs-js bg-left bn f5 input-reset lh-solid mt3 mt0-ns pl4 pv2 w5 white fem" placeholder="Search the Docs" name="search-input" value="" style="background: transparent url('/images/icon-search.png') no-repeat 0 8px /16px 16px;">
  </fieldset>
</form>

</div>

    <span class="absolute mt0 pr3 right-0 top-0">
<a href="https://github.com/microcks" class="github-corner hidden-md-down" aria-label="View source on Github" rel="nofollow" target="_blank">
  <svg width="74" height="74" viewBox="0 0 250 250" style="fill:#fff;z-index:2000;color:#1a3932;mix-blend-mode:screen;position:absolute;top:0;border:0;right:0" aria-hidden="true">
    <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
    <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7
      120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9
      125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path>
    <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6
      C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0
      C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1
      C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4
      C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9
      C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5
      C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9
      L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body">
    </path>
  </svg>
</a>
</span>

  </div>
</nav>

    
    <main role="main" class="content-with-sidebar min-vh-100 pb7 pb0-ns">
      
  <article class="w-100 ph3 pb5">
    <div class="flex-l">
      <div class="order-2 w-100 w-20-l ph5-m ph0-l mb4 sticky">
<aside class="fixed-lTK mw5-l right-0 f6 bl-l b--moon-gray pv4 pv0-ns ph4-l nested-list-reset nested-links nested-copy-line-height">
	
		<p class="b">What's on this Page</p>
  	<nav id="TableOfContents">
  <ul>
    <li><a href="#overview">Overview</a></li>
    <li><a href="#minikube-quick-start">Minikube Quick Start</a>
      <ul>
        <li><a href="#option-1-minimal-features">Option 1: Minimal features</a></li>
        <li><a href="#option-2-full-features">Option 2: Full features</a></li>
        <li><a href="#post-installation-operations">Post-installation operations</a></li>
      </ul>
    </li>
    <li><a href="#microcksinstall-resource">MicrocksInstall resource</a></li>
    <li><a href="#on-any-kube-distribution-without-olm">On any Kube distribution without OLM</a></li>
    <li><a href="#on-openshift-4-with-olm">On OpenShift 4 with OLM</a></li>
    <li><a href="#on-kubernetes-with-olm">On Kubernetes with OLM</a></li>
  </ul>
</nav>
	

	<div date-pref>
		
			<a href="https://microcks.io/documentation/installing/kubernetes/" class="dib f6 pl1 hover-bg-light-gray br-100" title="Installing on Kube using Helm ">
				<svg class="fill-current" height="30px" viewBox="0 0 24 24" width="30px" xmlns="http://www.w3.org/2000/svg">
    <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>

			</a>
		

		
			<a href="https://microcks.io/documentation/installing/podman-compose/" class="dib f6 pr1 hover-bg-light-gray br-100" title="Installing with podman-compose">
			<svg class="fill-current" height="30px" viewBox="0 0 24 24" width="30px" xmlns="http://www.w3.org/2000/svg">
    <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>

			</a>
		
	</div>

</aside>
</div>
      <div class="order-1 w-60-l mw8 ph0 ph4-ns">
        <header class="flex-none w-100 bg-primary-color pv3 ph3">
  
  <h1 class="lh-title mb3 mv0 pt3 accent-color-light fem">Installing on Kube using Operator</h1>
</header>

<aside class="bw1 pt3 mt2 mid-gray b--mid-gray fn w-100">
  
  
</aside>



<div class="prose" id="prose">

<h2 id="overview">Overview</h2>
<p>Operators are next-gen installer, maintainer and life-cycle manager for Kubernetes native applications. Operators are a Kubernetes native piece of software (aka Kube controller) that manages specific <code>Custom Resources</code> defining their domain of expertise. Microcks provide an Operator that was developed using the <a href="https://github.com/operator-framework/operator-sdk">Operator Framework SDK</a> and that is distributed through <a href="https://operatorhub.io/operator/microcks">OperatorHub.io</a>.</p>
<p>At the time of writing, Microcks only defines one customer resource that is called the <code>MicrocksInstall</code>: a description of the instance configuration you want to deploy. The properties of this custom resource are briefly described below.</p>
<p>Depending on your needs and usage of Operators, they can be easily deployed and managed using the <a href="https://github.com/operator-framework/operator-lifecycle-manager">Operator Lifecycle Manager</a>, an add-on that you may install into your Kubernetes cluster to track subscription and upgrades of operators. We describe both installation methods below: with or without Operator Lifecycle Manager (OLM).</p>
<h2 id="minikube-quick-start">Minikube Quick Start</h2>
<p>This assumes that you have the latest version of the <code>minikube</code> binary, which you can get <a href="https://kubernetes.io/docs/setup/minikube/#installation">here</a>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ minikube start --vm<span class="o">=</span><span class="nb">true</span> --cpus<span class="o">=</span><span class="m">4</span> --memory<span class="o">=</span><span class="m">6144</span> <span class="c1"># 2cpus and 2GB default memory isn&#39;t always enough</span>
$ minikube addons <span class="nb">enable</span> ingress
</code></pre></div><blockquote>
<p>Make sure to start minikube with your configured VM. If need help look at the <a href="https://kubernetes.io/docs/setup/minikube/#quickstart">documentation</a> for more.</p>
</blockquote>
<p>Next we create a Kubernetes namespace and deploy the latest version of the Microcks Operator:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ kubectl create namespace microcks
$ kubectl apply -f https://microcks.io/operator/operator-latest.yaml -n microcks
</code></pre></div><p>From this point, you have the choice of deploying:</p>
<ul>
<li>Either, a minimal Microcks instance that will allow you to mock and test REST APIs and SOAP WebServices as well as import AsyncAPI. However it will not allow you to play with AsyncAPI mocking features,</li>
<li>Or, a fully featured Microcks instance.</li>
</ul>
<h3 id="option-1-minimal-features">Option 1: Minimal features</h3>
<p>Retrieve the <code>minikube-minimal.yaml</code> manifest from our website and apply a substitution of <code>KUBE_APPS_URL</code> with your local Minikube IP address:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ curl https://microcks.io/operator/minikube-minimal.yaml -s <span class="p">|</span> sed <span class="s1">&#39;s/KUBE_APPS_URL/&#39;</span><span class="k">$(</span>minikube ip<span class="k">)</span><span class="s1">&#39;.nip.io/g&#39;</span> <span class="p">|</span> kubectl apply -n microcks -f -
</code></pre></div><p>After some minutes, check all the pods are up and running. You should have 6 pods (including the Operator) running:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ kubectl get pods -n microcks
NAME                                              READY   STATUS    RESTARTS   AGE
microcks-64dbf6dc9d-c5c6v                         1/1     Running   <span class="m">0</span>          1h
microcks-ansible-operator-6f76fcc5cb-d2br4        1/1     Running   <span class="m">0</span>          1h
microcks-keycloak-fd7467749-24cvs                 1/1     Running   <span class="m">0</span>          1h
microcks-keycloak-postgresql-549f469d7d-pw7mz     1/1     Running   <span class="m">0</span>          1h
microcks-mongodb-7b54785454-vsssq                 1/1     Running   <span class="m">0</span>          1h
microcks-postman-runtime-75f74d6779-9gjrn         1/1     Running   <span class="m">0</span>          1h
</code></pre></div><h3 id="option-2-full-features">Option 2: Full features</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ kubectl apply -f <span class="s1">&#39;https://strimzi.io/install/latest?namespace=microcks&#39;</span> -n microcks
$ curl https://microcks.io/operator/minikube-features.yaml -s <span class="p">|</span> sed <span class="s1">&#39;s/KUBE_APPS_URL/&#39;</span><span class="k">$(</span>minikube ip<span class="k">)</span><span class="s1">&#39;.nip.io/g&#39;</span> <span class="p">|</span> kubectl apply -n microcks -f -
</code></pre></div><p>If you need to access the Kafka cluster from the outside, you&rsquo;ll also have to enable the <code>SSL Passthrough</code> within the Nginx Ingress controller:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ kubectl patch -n kube-system deployment/ingress-nginx-controller --type<span class="o">=</span><span class="s1">&#39;json&#39;</span> <span class="se">\
</span><span class="se"></span>    -p <span class="s1">&#39;[{&#34;op&#34;:&#34;add&#34;,&#34;path&#34;:&#34;/spec/template/spec/containers/0/args/-&#34;,&#34;value&#34;:&#34;--enable-ssl-passthrough&#34;}]&#39;</span>
</code></pre></div><p>After some minutes, check all the pods are up and running. You should have 10 pods (including the Operator) running:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ kubectl get pods -n microcks
NAME                                              READY   STATUS    RESTARTS   AGE
microcks-64dbf6dc9d-c5c6v                         1/1     Running   <span class="m">0</span>          1h
microcks-ansible-operator-6f76fcc5cb-d2br4        1/1     Running   <span class="m">0</span>          1h
microcks-async-minion-57c4c46f7d-mcl27            1/1     Running   <span class="m">2</span>          1h
microcks-kafka-entity-operator-54b9468564-k4ptg   3/3     Running   <span class="m">0</span>          1h
microcks-kafka-kafka-0                            1/1     Running   <span class="m">0</span>          1h
microcks-kafka-zookeeper-0                        1/1     Running   <span class="m">0</span>          1h
microcks-keycloak-fd7467749-24cvs                 1/1     Running   <span class="m">0</span>          1h
microcks-keycloak-postgresql-549f469d7d-pw7mz     1/1     Running   <span class="m">0</span>          1h
microcks-mongodb-7b54785454-vsssq                 1/1     Running   <span class="m">0</span>          1h
microcks-postman-runtime-75f74d6779-9gjrn         1/1     Running   <span class="m">0</span>          1h
</code></pre></div><p>This installation process is demonstrated in following video that also demonstrates AsyncAPI mocking features:</p>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/ise7ljoGdEY" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<h3 id="post-installation-operations">Post-installation operations</h3>
<p>Now you can retrieve the URL of the created ingress using <code>kubectl get ingress -n microcks</code>.</p>
<p>Before starting playing with Microcks, you&rsquo;ll have to connect to the Keycloak component in order to configure an identity provider or define some users for the Microcks realm (see <a href="http://www.keycloak.org/docs/latest/server_admin/index.html#user-management">Keycloak documentation</a>). Connection to Keycloak can be done using username and password stored into a <code>microcks-keycloak-config</code> secret created during setup.</p>
<blockquote>
<p>Starting with Microcks <code>1.2.0</code> release, the installation process now creates default users with the different roles available. So you can directly login using <code>user</code>, <code>manager</code> or <code>admin</code> username with <code>microcks123</code> password.</p>
</blockquote>
<h2 id="microcksinstall-resource">MicrocksInstall resource</h2>
<p>Here&rsquo;s below the minimalistic form of a <code>MicrocksInstall</code>. You just have to specify a name, the desired version of Microcks and replicas.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">microcks.github.io/v1alpha1</span><span class="w">
</span><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">MicrocksInstall</span><span class="w">
</span><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">microcks</span><span class="w">
</span><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">microcks</span><span class="w">
</span><span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;1.2.1&#34;</span><span class="w">
</span><span class="w">  </span><span class="nt">microcks</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="w">
</span><span class="w">  </span><span class="nt">postman</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="w">
</span></code></pre></div><p>This form can only be used onto OpenShift as vanilla Kube will need more information to customize <code>Ingress</code>. Here&rsquo;s for example a full version that can be used onto Minikube:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">microcks.github.io/v1alpha1</span><span class="w">
</span><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">MicrocksInstall</span><span class="w">
</span><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">microcks-minikube</span><span class="w">
</span><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">microcks-minikube</span><span class="w">
</span><span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;1.2.1&#34;</span><span class="w">
</span><span class="w">  </span><span class="nt">microcks</span><span class="p">:</span><span class="w"> 
</span><span class="w">    </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="w">
</span><span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l">microcks.192.168.99.100.nip.io</span><span class="w">
</span><span class="w">  </span><span class="nt">postman</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="m">2</span><span class="w">
</span><span class="w">  </span><span class="nt">keycloak</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">install</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="w">    </span><span class="nt">persistent</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="w">    </span><span class="nt">volumeSize</span><span class="p">:</span><span class="w"> </span><span class="l">1Gi</span><span class="w">
</span><span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l">keycloak.192.168.99.100.nip.io</span><span class="w">
</span><span class="w">    </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="w">
</span><span class="w">  </span><span class="nt">mongodb</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">install</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="w">    </span><span class="nt">persistent</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="w">    </span><span class="nt">volumeSize</span><span class="p">:</span><span class="w"> </span><span class="l">2Gi</span><span class="w">
</span><span class="w">    </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="w">
</span></code></pre></div><p>We recommend having a look at the <a href="https://github.com/microcks/microcks-ansible-operator">operator documentation</a> for full understanding of CR.</p>
<h2 id="on-any-kube-distribution-without-olm">On any Kube distribution without OLM</h2>
<p>For development or on bare OpenShift and Kubernetes clusters, without Operator Lifecycle Management (OLM).</p>
<p>Start cloning this repos and then, optionally, create a new project:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ git clone https://github.com/microcks/microcks-ansible-operator.git
$ <span class="nb">cd</span> microcks-ansible-operator/
$ kubectl create namespace microcks
</code></pre></div><p>Then, from this repository root directory, create the specific CRDS and resources needed for Operator:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ kubectl create -f deploy/crds/microcks_v1alpha1_microcksinstall_crd.yaml
$ kubectl create -f deploy/service_account.yaml -n microcks
$ kubectl create -f deploy/role.yaml -n microcks
$ kubectl create -f deploy/role_binding.yaml -n microcks 
</code></pre></div><p>Finally, deploy the operator:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ kubectl create -f deploy/operator.yaml -n microcks
</code></pre></div><p>Wait a minute or two for the deployment to be ready:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">kubectl <span class="nb">wait</span> --for<span class="o">=</span><span class="nv">condition</span><span class="o">=</span>available --timeout<span class="o">=</span>600s deployment/microcks-ansible-operator -n microcks
</code></pre></div><p>Finally, check everything is running:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ kubectl get pods -n microcks                               
NAME                                        READY     STATUS    RESTARTS   AGE
microcks-ansible-operator-f58b97548-qj26l   1/1       Running   <span class="m">0</span>          3m
</code></pre></div><p>Now just create a <code>MicrocksInstall</code> CR!</p>
<h2 id="on-openshift-4-with-olm">On OpenShift 4 with OLM</h2>
<p>As OpenShift 4.x is embedding OLM by default, it is fairly easy to realize a new Microcks installation. The video below shows an install from scratch on OpenShift but also exposes the post-installation steps required for creating user and connecting to the app.</p>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/P2RFDxL0xsA" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<h2 id="on-kubernetes-with-olm">On Kubernetes with OLM</h2>
<p>Install Operator Lifecycle Manager (OLM), a tool to help manage the Operators running on your cluster.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ curl -sL https://github.com/operator-framework/operator-lifecycle-manager/releases/download/0.14.1/install.sh <span class="p">|</span> bash -s 0.13.0
</code></pre></div><p>Install the operator by running the following command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ kubectl create -f https://operatorhub.io/install/microcks.yaml
</code></pre></div><p>For more details on what&rsquo;s going on with this command, check <a href="https://operatorhub.io/how-to-install-an-operator#What-happens-when-I-execute-the-'Install'-command-presented-in-the-pop-up?">this page</a>.
This Operator will be installed in the <code>my-microcks</code> namespace and will be usable from this namespace only. After install, watch your operator come up using next command.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ kubectl get csv -n my-microcks
</code></pre></div><p>To use it, checkout the custom resource definitions (CRDs) introduced by this operator to start using it.</p>

</div>

        

      </div>
      <div class="order-0 w-20 dn db-l mt4 ph3">
        
<nav role="navigation">
  <ul class="list pa0 nl2">
    
      
      <li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8">
        <a href="javascript:void(0)" class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pv2 " data-target=".using">USING</a>
        <ul class="using desktopmenu animated fadeIn list pl0 bg-light-gray dn">
          <li class="f6 fw4">
            <a href="/documentation/getting-started/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              GETTING STARTED
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/documentation/getting-started-tests/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              GETTING STARTED WITH TESTS
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/documentation/using/importers/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              IMPORTING SERVICES &amp; APIS
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/documentation/using/alternatives/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              COMPARISON TO ALTERNATIVES
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/documentation/using/openapi/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              OPENAPI USAGE FOR MICROCKS
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/documentation/using/asyncapi/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              ASYNCAPI USAGE FOR MICROCKS
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/documentation/using/postman/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              POSTMAN USAGE FOR MICROCKS
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/documentation/using/grpc/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              GRPC USAGE FOR MICROCKS
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/documentation/using/soapui/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              SOAPUI USAGE FOR MICROCKS
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/documentation/using/mocks/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              USING EXPOSED MOCKS
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/documentation/using/dynamic/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              GETTING DYNAMIC MOCKS
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/documentation/using/tests/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              EXECUTING TESTS
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/documentation/using/advanced/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              ADVANCED TOPICS
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/documentation/using/advanced/organizing/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              ORGANIZING REPOSITORY
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/documentation/using/advanced/templates/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              TEMPLATING MOCK RESPONSES
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/documentation/using/advanced/dispatching/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              CUSTOM DISPATCHING RULES
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/documentation/using/advanced/metadata/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              MICROCKS APIMETADATA
            </a>
          </li>
        </ul>
      </li>
      
      <li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8">
        <a href="javascript:void(0)" class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pv2  accent-color-light" data-target=".installing">INSTALLING</a>
        <ul class="installing desktopmenu animated fadeIn list pl0 bg-light-gray db">
          <li class="f6 fw4">
            <a href="/documentation/installing/kubernetes/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              INSTALLING ON KUBE USING HELM
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/documentation/installing/operator/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 accent-color-light ">
              INSTALLING ON KUBE USING OPERATOR
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/documentation/installing/docker-compose/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              INSTALLING WITH DOCKER-COMPOSE
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/documentation/installing/podman-compose/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              INSTALLING WITH PODMAN-COMPOSE
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/documentation/installing/deployment-options/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              ARCHITECTURE AND DEPLOYMENT OPTIONS
            </a>
          </li>
        </ul>
      </li>
      
      <li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8">
        <a href="javascript:void(0)" class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pv2 " data-target=".automating">AUTOMATING</a>
        <ul class="automating desktopmenu animated fadeIn list pl0 bg-light-gray dn">
          <li class="f6 fw4">
            <a href="/documentation/automating/service-account/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              MICROCKS SERVICE ACCOUNTS
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/documentation/automating/jenkins/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              INTEGRATING MICROCKS FROM JENKINS
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/documentation/automating/cli/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              CLI FOR MICROCKS
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/documentation/automating/tekton/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              USING MICROCKS FROM TEKTON
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/documentation/automating/github-actions/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              USING MICROCKS FROM GITHUB ACTIONS
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/documentation/automating/api/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              MICROCKS API
            </a>
          </li>
        </ul>
      </li>
      
      <li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8">
        <a href="javascript:void(0)" class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pv2 " data-target=".administrating">ADMINISTRATING</a>
        <ul class="administrating desktopmenu animated fadeIn list pl0 bg-light-gray dn">
          <li class="f6 fw4">
            <a href="/documentation/administrating/users/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              MANAGING USERS
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/documentation/administrating/secrets/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              EXTERNAL SECRETS
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/documentation/administrating/snapshots/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              REPOSITORY SNAPSHOTS
            </a>
          </li>
        </ul>
      </li>
      
      <li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8 mb1 bb b--moon-gray">
        <a href="javascript:void(0)" class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pv2 " data-target=".guides">GUIDES</a>
        <ul class="guides desktopmenu animated fadeIn list pl0 bg-light-gray dn">
          <li class="f6 fw4">
            <a href="/documentation/guides/avro-messaging/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              KAFKA, AVRO AND SCHEMA REGISTRY
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/documentation/guides/mqtt-support/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              MQTT MOCKING AND TESTING
            </a>
          </li>
        </ul>
      </li>
      
      <li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8">
        <a href="/resources/" class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pv2 " data-target=".resources">RESOURCES</a>
      </li>
      
      <li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8">
        <a href="/community/" class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pv2 " data-target=".community">COMMUNITY</a>
      </li>
  </ul>
</nav>

      </div>
    </div>

  </article>
  

  <div class="w-100 bg-light-gray">
    <div class="mw7 pa4 center nested-lh-copy lh-copy">
      <h6 class="f4 dark-gray mb2">
  <a href="https://microcks.io/documentation/installing/operator/" class="hide-child link primary-color">
  <span class="nl3 child"><svg class="grow" fill="" height="14px" viewBox="0 0 24 24" width="14px" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg>
</span>
    “Installing on Kube using Operator”
  </a> was last updated: April 28, 2021
</h6>

      <a href="edit/master/content/en/documentation/installing/operator.md" class="
f6 ph3 pv1 br2 dib  tc ttu mv3 bg-primary-color white hover-bg-green link
">Improve this page</a>

      


    </div>
  </div>

    </main>

    <footer class="bg-primary-color-dark ph4-ns pt4 relative w-100" role="contentinfo">
    <div class="center flex-ns flex-wrap justify-between mw9 w-90">
      <div class="pb3 pt4 w-100 w-50-ns">

         <div class="b f3  light-gray mb3 nested-links tc">
           By the <a href="https://github.com/microcks/microcks/graphs/contributors" class="link">Microcks Authors</a><br />
          </div>

          <ul class="center f6 list ma0 mv3 pa0 tc"></ul>

          <ul class="center f6 list ma0 mv4 pa0 tc">
            <li class="dib mr3"><a href="https://twitter.com/microcksIO" class="dim link light-gray pv2">@MicrocksIO</a></li>
            <li class="dib mr3"><a href="https://twitter.com/lbroudoux" class="dim link light-gray pv2">@lbroudoux</a></li>
            
          </ul>

          

      </div>

       

    </div>

    <div class="f7 gray mb5 mb0-ns ph3 w-100"> 
      <p class="dib mr4">
        The Microcks logos are copyright © Laurent Broudoux 2016–2021. <br/>
        Icons by Made x Made from the Noun Project.<br/>
      </p>
    </div>

    
    
    <a href="https://microcksio.zulipchat.com" target="new">
      <img src="/images/zulip.png" class="absolute-l bottom-2 dn db-l h4 right-2 mr2 mb2 z-999 br4"/>
    </a>

    <div class="bg-primary-color-dark bottom-0 left-0 right-0 dn-l fixed pb3 ph3 w-100"><div  class="globalmenu mobilemenu pb3 dn">
    

<ul class="list hidden dib ph0 ma0 scrolling-touch tc">
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="/news/" class="ttu f6 link primary-color-light overflow hover-white db brand-font  ma0 w-100 pv3 ph4">
          News
        </a>
    </li>
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="/documentation/" class="ttu f6 link primary-color-light overflow hover-white db brand-font  ma0 w-100 pv3 ph4">
          Docs
        </a>
    </li>
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="/blog/" class="ttu f6 link primary-color-light overflow hover-white db brand-font  ma0 w-100 pv3 ph4">
          Blog
        </a>
    </li>
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="/resources/" class="ttu f6 link primary-color-light overflow hover-white db brand-font  ma0 w-100 pv3 ph4">
          Resources
        </a>
    </li>
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="/community/" class="ttu f6 link primary-color-light overflow hover-white db brand-font  ma0 w-100 pv3 ph4">
          Community
        </a>
    </li>
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="https://github.com/microcks/microcks" class="ttu f6 link primary-color-light overflow hover-white db brand-font  ma0 w-100 pv3 ph4">
          GitHub
        </a>
    </li>
  
</ul>

</div>
<div  class="docsmenu mobilemenu pb3 dn">
    

<ul class="list dib ph0 ma0 scrolling-touch tc">
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="/documentation//using/" class="ttu f6 link primary-color-light  hover-white db brand-font mb1  ma0 w-100 pv2 ph4">
          Using
        </a>
    </li>
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="/documentation//installing/" class="ttu f6 link primary-color-light  hover-white db brand-font mb1  ma0 w-100 pv2 ph4">
          Installing
        </a>
    </li>
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="/documentation//automating/" class="ttu f6 link primary-color-light  hover-white db brand-font mb1  ma0 w-100 pv2 ph4">
          Automating
        </a>
    </li>
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="/documentation//administrating/" class="ttu f6 link primary-color-light  hover-white db brand-font mb1  ma0 w-100 pv2 ph4">
          Administrating
        </a>
    </li>
  
    <li  class="tl dib ma0 hover-bg-black w-100 mb2 bb b--mid-gray">
        <a href="/documentation//guides/" class="ttu f6 link primary-color-light  hover-white db brand-font mb1  ma0 w-100 pv2 ph4">
          Guides
        </a>
    </li>
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="/documentation//resources/" class="ttu f6 link primary-color-light  hover-white db brand-font mb1  ma0 w-100 pv2 ph4">
          Resources
        </a>
    </li>
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="/documentation//community/" class="ttu f6 link primary-color-light  hover-white db brand-font mb1  ma0 w-100 pv2 ph4">
          Community
        </a>
    </li>
  
</ul>

</div>

<div class="flex dn-l justify-between pt3-xs">
  <button class="js-toggle flex-auto dib dn-l f6 tc db mt4-ns ph3 pv2 link mr2 white bg-primary-color-dark hover-bg-primary-color ba b--white-40 w-auto" data-target=".globalmenu">Menu</button>

  <button class="js-toggle flex-auto dib dn-l f6 tc db mt4-ns ph3 pv2 link white bg-primary-color-dark hover-bg-primary-color ba b--white-40 w-auto" data-target=".docsmenu">Docs Menu</button>
</div>
</div>

</footer>

    

  </body>
</html>
